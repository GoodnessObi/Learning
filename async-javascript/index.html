<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Asynchronous javascript</h1>

    <script>
            // const second = () => {
            //     setTimeout(() => {
            //         console.log(' async hey there');
            //     }, 2000)
            // }

            // const first = () => {
            //     console.log('hey there');
            //     second();
            //     console.log('the end')
            // }

            // first();

            // function getRecipe() {
            //     setTimeout(() => {
            //         const recipeID = [234, 354, 736, 182];
            //         console.log(recipeID);

            //         setTimeout((id)=> {
            //             const recipe = {title: 'Fresh tomato pasta', publisher: 'Itunu'};
            //             console.log(`${id}: ${recipe.title}`);
            //             setTimeout(publisher => {
            //                 const recipe2 = {tile: 'Italian Pizza', publisher: 'Itunu'};
            //                 console.log(recipe);
            //             },1500, recipe.publisher)

            //         }, 1500, recipeID[2]);

            //     }, 1500);
            // }

            // getRecipe();

            const getIDs = new Promise((resolve, reject) => {
                setTimeout(() => {
                    resolve([234, 354, 736, 182]);
                },1500);
            });

            const getRecipe = recID => {
                return new Promise((resolve,reject) => {
                    setTimeout(ID => {
                        const recipe = {title: 'Fresh tomato pasta', publisher: 'Itunu'};
                        resolve(`${ID}: ${recipe.title}`);
                    }, 1500, recID);
                });
            }

            const getRelated = publisher => {
                return new Promise((resolve, reject) => {
                    setTimeout(pub => {
                        const recipe = {title: 'Italian Pizza', publisher: 'Itunu'};
                        resolve(`${pub}: ${recipe.title}`);
                    }, 1500, publisher)
                })
            }

            // getIDs
            // .then(IDs => {
            //     console.log(IDs);
            //     return getRecipe(IDs[2]);
            // })
            // .then(recipe => {
            //     console.log(recipe);
            //     return getRelated('Itunu');
            // })
            // .then(recipe => {
            //     console.log(recipe);
            // })
            // .catch(error => {
            //     console.log('error!!!')
            // });

            async function getRecipeAW() {
                const IDs = await getIDs;
                console.log(IDs);
                const recipe = await getRecipe(IDs[2]);
                console.log(recipe);
                const related = await getRelated('Itunu');
                console.log(related);

                return recipe;
            }

            getRecipeAW().then(result => console.log(`${result} is the best ever!!`));
    </script>
</body>
</html>